{
  "name": "napari-SAM4IS",
  "display_name": "napari-SAM4IS",
  "visibility": "public",
  "icon": "",
  "categories": [],
  "schema_version": "0.2.1",
  "on_activate": null,
  "on_deactivate": null,
  "contributions": {
    "commands": [
      {
        "id": "napari-SAM4IS.make_sam_widget",
        "title": "Make SAM Widget",
        "python_name": "napari_sam4is:SAMWidget",
        "short_title": null,
        "category": null,
        "icon": null,
        "enablement": null
      }
    ],
    "readers": null,
    "writers": null,
    "widgets": [
      {
        "command": "napari-SAM4IS.make_sam_widget",
        "display_name": "SAM Widget",
        "autogenerate": false
      }
    ],
    "sample_data": null,
    "themes": null,
    "menus": {},
    "submenus": null,
    "keybindings": null,
    "configuration": []
  },
  "package_metadata": {
    "metadata_version": "2.4",
    "name": "napari-SAM4IS",
    "version": "0.1.4",
    "dynamic": [
      "license-file"
    ],
    "platform": null,
    "supported_platform": null,
    "summary": "Create annotations for instance segmentation using Segment Anything models",
    "description": "# napari-SAM4IS\n\n[![License Apache Software License 2.0](https://img.shields.io/pypi/l/napari-SAM4IS.svg?color=green)](https://github.com/hiroalchem/napari-SAM4IS/raw/main/LICENSE)\n[![PyPI](https://img.shields.io/pypi/v/napari-SAM4IS.svg?color=green)](https://pypi.org/project/napari-SAM4IS)\n[![Python Version](https://img.shields.io/pypi/pyversions/napari-SAM4IS.svg?color=green)](https://python.org)\n[![tests](https://github.com/hiroalchem/napari-SAM4IS/workflows/tests/badge.svg)](https://github.com/hiroalchem/napari-SAM4IS/actions)\n[![codecov](https://codecov.io/gh/hiroalchem/napari-SAM4IS/branch/main/graph/badge.svg)](https://codecov.io/gh/hiroalchem/napari-SAM4IS)\n[![napari hub](https://img.shields.io/endpoint?url=https://api.napari-hub.org/shields/napari-SAM4IS)](https://napari-hub.org/plugins/napari-SAM4IS)\n\n\n### napari plugin for instance and semantic segmentation annotation using Segment Anything Model (SAM)\n\nThis is a plugin for [napari](https://napari.org/), a multi-dimensional image viewer for Python, that allows for instance and semantic segmentation annotation. This plugin provides an easy-to-use interface for annotating images with the option to output annotations as COCO format.\n\n----------------------------------\n\nThis [napari] plugin was generated with [Cookiecutter] using [@napari]'s [cookiecutter-napari-plugin] template.\n\n<!--\nDon't miss the full getting started guide to set up your new package:\nhttps://github.com/napari/cookiecutter-napari-plugin#getting-started\n\nand review the napari docs for plugin developers:\nhttps://napari.org/stable/plugins/index.html\n-->\n\n## Installation\n\n**Requirements**: Python 3.10-3.13\n\n### Step 1: Install napari-SAM4IS\n\nYou can install `napari-SAM4IS` via [pip]:\n\n```bash\npip install napari-SAM4IS\n```\n\nOr via conda:\n\n```bash\nconda install -c conda-forge napari-SAM4IS\n```\n\nTo install the latest development version:\n\n```bash\npip install git+https://github.com/hiroalchem/napari-SAM4IS.git\n```\n\n### Step 2: Install Segment Anything Model (Optional - for local model usage)\n\n**Note**: Installing the Segment Anything Model is only required if you plan to use local models. If you're using the API mode, you can skip this step.\n\nTo use local models, install SAM:\n\n```bash\npip install git+https://github.com/facebookresearch/segment-anything.git\n```\n\nOr you can install from source by cloning the repository:\n\n```bash\ngit clone https://github.com/facebookresearch/segment-anything.git\ncd segment-anything\npip install -e .\n```\n\nFor more detailed instructions, please refer to the [SAM installation guide](https://github.com/facebookresearch/segment-anything#installation).\n\n## Usage\n### Preparation\n1. Open an image in napari and launch the plugin. (Opening an image after launching the plugin is also possible.)\n2. Upon launching the plugin, several layers will be automatically created: SAM-Box, SAM-Positive, SAM-Negative, SAM-Predict, and Accepted. The usage of these layers will be explained later.\n3. Choose between local model or API mode:\n   - **Local Model Mode**: Select the model you want to use and click the load button. (The default option is recommended.)\n   - **API Mode**: Check the \"Use API\" checkbox, then enter your API URL and API Key. No model loading is required.\n4. Next, select the image layer you want to annotate.\n5. Then, select whether you want to do instance segmentation or semantic segmentation. (Note that for 3D images, semantic segmentation should be chosen in the current version.)\n6. Finally, select the output layer as \"shapes\" for instance segmentation or \"labels\" for semantic segmentation. (For instance segmentation, the \"Accept\" layer can also be used.)\n\n### Class Management\nYou can define annotation classes to assign to each segmented object.\n\n1. In the **Class Management** section, type a class name and click **Add** (or press Enter) to add a new class.\n2. Click a class in the list to select it. The selected class will be assigned to subsequent annotations.\n3. To reassign a class, select an existing annotation in the output Shapes layer, then click the desired class.\n4. Classes in use cannot be deleted. Remove the associated annotations first.\n5. You can load class definitions from a YAML file (click **Load**). The expected format is:\n   ```yaml\n   names:\n     0: cat\n     1: dog\n     2: bird\n   ```\n6. Class definitions are automatically saved as `class.yaml` alongside the COCO JSON output.\n\n### Annotation with SAM\n1. Select the SAM-Box layer and use the rectangle tool to enclose the object you want to segment.\n2. An automatic segmentation mask will be created and output to the SAM-Predict layer.\n3. You can refine the prediction by adding point prompts: click on the SAM-Positive layer to add points that should be included, or on the SAM-Negative layer to add points that should be excluded.\n4. If you want to make further adjustments, do so in the SAM-Predict layer.\n5. To accept or reject the annotation, press **A** or **R** on the keyboard, respectively.\n6. If you accept the annotation, it will be output as label 1 for semantic segmentation or converted to a polygon and output to the designated layer for instance segmentation. The currently selected class will be assigned to the annotation.\n7. If you reject the annotation, the segmentation mask in the SAM-Predict layer will be discarded.\n8. After accepting or rejecting the annotation, the SAM-Predict layer will automatically reset to blank and return to the SAM-Box layer.\n\n### Manual Annotation (without SAM)\nYou can also annotate without using SAM by enabling **Manual Mode**.\n\n1. Check the **Manual Mode** checkbox. SAM-related controls and layers will be hidden.\n2. The SAM-Predict layer switches to paint mode. Use napari's standard Labels tools (paint brush, eraser, fill) from the layer controls panel to draw your annotation.\n3. Adjust brush size using napari's standard Labels controls.\n4. Press **A** to accept or **R** to reject, just like SAM mode.\n5. After accepting, the painted mask is converted to a polygon (instance mode) or merged into the output Labels layer (semantic mode), with the selected class assigned.\n\n### Annotation Attributes\nEach annotation can have additional attributes to support quality control workflows.\n\n1. Select one or more annotations in the output Shapes layer.\n2. In the **Attributes** panel, you can set:\n   - **Unclear**: Mark annotations where the object boundary is ambiguous.\n   - **Uncertain**: Mark annotations where the object class is uncertain.\n   - **Reviewed at**: Automatically records a timestamp when an annotation is reviewed. Click **Mark reviewed** to set, or **Clear** to reset.\n3. Attributes are saved as part of the COCO JSON output under each annotation's `\"attributes\"` field.\n4. When multiple annotations are selected with mixed attribute values, checkboxes show a mixed state indicator.\n\n### Saving and Loading Annotations\n1. If you have output to the labels layer, use napari's standard functionality to save the mask.\n2. If you have output to the shapes layer, you can save the shapes layer using napari's standard functionality, or you can click the **Save** button to output a JSON file in COCO format for each image in the folder. (The JSON file will have the same name as the image.) Class definitions will also be saved as `class.yaml` in the same directory.\n3. To load previously saved annotations, click the **Load** button and select a COCO JSON file. Annotations, class definitions, and attributes will be restored.\n4. When switching images via the Image ComboBox, the plugin will:\n   - Prompt to save unsaved annotations (Save / Discard / Cancel)\n   - Automatically clear the output layer\n   - Auto-load annotations from a matching JSON file if one exists\n\n\n\n## Contributing\n\nContributions are very welcome. Tests can be run with [tox], please ensure\nthe coverage at least stays the same before you submit a pull request.\n\n## License\n\nDistributed under the terms of the [Apache Software License 2.0] license,\n\"napari-SAM4IS\" is free and open source software\n\n## Issues\n\nIf you encounter any problems, please [file an issue] along with a detailed description.\n\n[napari]: https://github.com/napari/napari\n[Cookiecutter]: https://github.com/audreyr/cookiecutter\n[@napari]: https://github.com/napari\n[MIT]: http://opensource.org/licenses/MIT\n[BSD-3]: http://opensource.org/licenses/BSD-3-Clause\n[GNU GPL v3.0]: http://www.gnu.org/licenses/gpl-3.0.txt\n[GNU LGPL v3.0]: http://www.gnu.org/licenses/lgpl-3.0.txt\n[Apache Software License 2.0]: http://www.apache.org/licenses/LICENSE-2.0\n[Mozilla Public License 2.0]: https://www.mozilla.org/media/MPL/2.0/index.txt\n[cookiecutter-napari-plugin]: https://github.com/napari/cookiecutter-napari-plugin\n\n[file an issue]: https://github.com/hiroalchem/napari-SAM4IS/issues\n\n[napari]: https://github.com/napari/napari\n[tox]: https://tox.readthedocs.io/en/latest/\n[pip]: https://pypi.org/project/pip/\n[PyPI]: https://pypi.org/\n",
    "description_content_type": "text/markdown",
    "keywords": null,
    "home_page": null,
    "download_url": null,
    "author": null,
    "author_email": "Hiroki Kawai <h.kawai888@gmail.com>",
    "maintainer": null,
    "maintainer_email": null,
    "license": null,
    "classifier": [
      "Development Status :: 2 - Pre-Alpha",
      "Framework :: napari",
      "Intended Audience :: Developers",
      "Operating System :: OS Independent",
      "Programming Language :: Python",
      "Programming Language :: Python :: 3",
      "Programming Language :: Python :: 3 :: Only",
      "Programming Language :: Python :: 3.10",
      "Programming Language :: Python :: 3.11",
      "Programming Language :: Python :: 3.12",
      "Programming Language :: Python :: 3.13",
      "Topic :: Scientific/Engineering :: Image Processing"
    ],
    "requires_dist": [
      "numpy<2.0,>=1.23.0",
      "magicgui<1.0,>=0.8.0",
      "qtpy<3.0,>=2.4.0",
      "torch<3.0,>=2.0.0",
      "torchvision<1.0,>=0.15.0",
      "scikit-image<1.0,>=0.21.0",
      "napari<0.7.0,>=0.4.19",
      "PySide6",
      "requests<3.0,>=2.31.0",
      "urllib3<3.0,>=2.0.0",
      "Pillow<11.0,>=10.0.0",
      "pyyaml<7.0,>=6.0",
      "tox; extra == \"testing\"",
      "pytest<9.0,>=7.4.0; extra == \"testing\"",
      "pytest-cov<6.0,>=4.1.0; extra == \"testing\"",
      "pytest-qt<5.0,>=4.2.0; extra == \"testing\"",
      "black<25.0,>=24.0; extra == \"dev\"",
      "ruff<1.0,>=0.8.0; extra == \"dev\"",
      "pre-commit; extra == \"dev\""
    ],
    "requires_python": ">=3.10",
    "requires_external": null,
    "project_url": [
      "Bug Tracker, https://github.com/hiroalchem/napari-SAM4IS/issues",
      "Documentation, https://github.com/hiroalchem/napari-SAM4IS#README.md",
      "Source Code, https://github.com/hiroalchem/napari-SAM4IS",
      "User Support, https://github.com/hiroalchem/napari-SAM4IS/issues"
    ],
    "provides_extra": [
      "testing",
      "dev"
    ],
    "provides_dist": null,
    "obsoletes_dist": null
  },
  "npe1_shim": false
}