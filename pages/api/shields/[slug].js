import path from "path";
import { promises as fs } from "fs";


const logo_svg = `
<?xml version="1.0" encoding="UTF-8"?><svg fill="none" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M27.8387 0H2.16127C0.967636 0 0 0.967636 0 2.16127V27.8387C0 29.0324 0.967636 30 2.16127 30H27.8387C29.0324 30 30 29.0324 30 27.8387V2.16127C30 0.967636 29.0324 0 27.8387 0Z" fill="#26283D"/><path d="m27.778 1.0314h-25.554c-0.65842 0-1.1922 0.53375-1.1922 1.1922v25.554c0 0.6584 0.53375 1.1922 1.1922 1.1922h25.554c0.6584 0 1.1922-0.5338 1.1922-1.1922v-25.554c0-0.65843-0.5338-1.1922-1.1922-1.1922z" fill="url(#b)"/><path d="m17.466 27.336c-0.3665 0-0.7113-0.016-1.0531-0.0464-0.4028-0.0252-0.8024-0.0877-1.1937-0.1869-0.7891-0.2269-1.5269-0.6042-2.1728-1.111-0.9065-0.6947-1.6633-1.5653-2.225-2.5596-0.226-0.3984-0.4346-0.9547-0.98797-2.4423-0.12168-0.3289-0.21294-0.5795-0.28972-0.7808-0.17962-0.4882-0.23901-0.6533-0.38532-0.9706-0.19084-0.4532-0.42515-0.8869-0.69966-1.295-0.33546-0.4667-0.72439-0.8926-1.1589-1.269-0.16658-0.1448-0.24336-0.2129-0.38532-0.323-0.17673-0.1448-0.42009-0.3332-0.88653-0.7417-0.78802-0.6924-1.085-1.014-1.3588-1.3645-0.41279-0.5036-0.7415-1.0705-0.97344-1.6789-0.2029-0.5392-0.32116-1.1065-0.35056-1.6818-0.01498-0.5017 0.03813-1.0032 0.15789-1.4906 0.19202-0.93888 0.5097-1.8476 0.94448-2.7016 0.30097-0.63507 0.6912-1.2238 1.1589-1.7484 0.55402-0.59662 1.1947-1.1064 1.9005-1.5123 0.32368-0.19053 0.66289-0.35335 1.014-0.48672 0.52169-0.18774 1.0723-0.28237 1.6268-0.27958 0.4963 0.00115 0.9903 0.06838 1.4688 0.19991 0.9595 0.23521 1.8169 0.77496 2.4438 1.5384 0.6605 0.817 0.9271 1.844 1.1429 3.2361 0.055 0.36215 0.0768 0.54901 0.0956 0.7127 0.0116 0.11299 0.0246 0.22598 0.0536 0.42588 0.1753 1.1936 0.2622 1.7383 0.4621 2.154 0.2897 0.6084 0.8431 0.9633 1.2067 1.198 0.8923 0.5794 1.8136 0.6576 2.4234 0.7112 0.2405 0.0217 0.5143 0.0333 0.8127 0.0333 0.4461 0 0.817-0.0246 0.9546-0.0347 0.2738-0.0203 0.5026-0.0464 0.7243-0.0725 0.3362-0.0454 0.6748-0.0705 1.014-0.0753 0.4248-3e-4 0.8478 0.0567 1.2573 0.1695 0.8895 0.2051 1.6918 0.6851 2.2931 1.3718 0.6099 0.7243 0.7736 1.4384 0.9793 2.3467 0.1398 0.6066 0.2275 1.224 0.2622 1.8455 0.0347 0.7054 0.0825 1.6687-0.2492 2.8044-0.3198 1.0444-0.8697 2.0037-1.6094 2.8074-0.7758 0.8703-1.7097 1.5856-2.7522 2.1076-0.5916 0.2901-1.2102 0.5216-1.847 0.691-0.8833 0.2472-1.7904 0.4002-2.7059 0.4563-0.3868 0.029-0.7605 0.0435-1.1125 0.0435z" fill="#26283D"/><path d="m17.466 26.226c-0.3332 0-0.6461-0.0131-0.9546-0.0406-0.3421-0.0201-0.6816-0.072-1.014-0.155-0.6501-0.1897-1.2575-0.503-1.789-0.9227-0.7839-0.6036-1.4381-1.3588-1.9237-2.2207-0.1826-0.323-0.3969-0.8967-0.9141-2.2844-0.1217-0.3245-0.2115-0.5708-0.2897-0.7736-0.1796-0.491-0.2535-0.6953-0.4186-1.0531-0.21821-0.5125-0.485-1.0029-0.79676-1.4645-0.38286-0.5327-0.82673-1.0189-1.3226-1.4486-0.19555-0.1781-0.29985-0.2607-0.44471-0.3751-0.17817-0.1449-0.39836-0.3144-0.84307-0.704-0.72429-0.6345-0.98503-0.917-1.2168-1.2139-0.34222-0.4151-0.61517-0.8828-0.80831-1.3849-0.31826-0.8118-0.36901-1.704-0.14486-2.5466 0.17084-0.84587 0.45592-1.6646 0.84742-2.4336 0.25688-0.54711 0.59105-1.0545 0.99227-1.5065 0.47498-0.5142 1.0249-0.95372 1.6311-1.3037 0.26981-0.15873 0.55227-0.29488 0.84452-0.40705 0.39943-0.14399 0.8212-0.21608 1.2458-0.21294 0.399 0.00228 0.7959 0.05683 1.1806 0.16224 0.7333 0.17148 1.3902 0.57854 1.8701 1.1589 0.4346 0.54611 0.6881 1.2805 0.9097 2.7088 0.0522 0.33897 0.071 0.50556 0.0884 0.66635 0.013 0.12313 0.0275 0.24626 0.0594 0.46354 0.1796 1.2183 0.2781 1.8904 0.5606 2.4756 0.4346 0.888 1.1588 1.3631 1.6036 1.6456 1.1212 0.7243 2.251 0.8257 2.9261 0.8865 0.2723 0.0247 0.5794 0.0363 0.9111 0.0363 0.4839 0 0.8866-0.0261 1.0387-0.0377 0.2897-0.0217 0.5446-0.0507 0.7663-0.0768 0.2925-0.0397 0.587-0.0624 0.8821-0.0681 0.3266-4e-4 0.6517 0.0439 0.9662 0.1319 0.3709 0.0999 1.1415 0.3099 1.7383 1.014 0.4346 0.5171 0.5592 1.0589 0.746 1.8831 0.1256 0.5437 0.2046 1.0971 0.2362 1.6543 0.0318 0.6605 0.0724 1.4819-0.2072 2.4379-0.2751 0.8914-0.7474 1.7093-1.3819 2.3931-0.6819 0.7614-1.5023 1.3863-2.4177 1.8411-0.5296 0.2601-1.0837 0.4668-1.6543 0.6171-0.8126 0.226-1.6467 0.3658-2.4886 0.4172-0.3462 0.0333-0.6866 0.0406-1.014 0.0406z" fill="#A59678"/><path d="m9.2115 4.8354c0.82131-0.3013 1.6398-0.09126 1.8831-0.02752 0.5507 0.12671 1.0438 0.43236 1.4023 0.86914 0.323 0.39836 0.5243 1.014 0.7242 2.2786 0.0913 0.58812 0.0739 0.6142 0.1449 1.1226 0.1869 1.269 0.2984 2.028 0.6417 2.7378 0.5403 1.1154 1.4486 1.705 1.9252 2.0107 1.3037 0.8459 2.6074 0.9618 3.3317 1.027 0.6978 0.0516 1.3984 0.0516 2.0961 0 1.1111-0.0826 1.5514-0.2492 2.3105-0.042 0.3346 0.0898 0.8778 0.2462 1.2834 0.7243 0.2897 0.3491 0.3824 0.7243 0.5563 1.4964 0.1141 0.4922 0.1858 0.9933 0.2144 1.4978 0.0318 0.6388 0.0651 1.3298-0.171 2.1395-0.2386 0.7666-0.6483 1.469-1.198 2.0541-0.6032 0.6731-1.3293 1.2247-2.1395 1.6253-0.4808 0.2343-0.9841 0.4192-1.5022 0.5519-0.7544 0.2096-1.5289 0.3387-2.3104 0.3853-0.605 0.051-1.2131 0.051-1.818 0-0.2887-0.0165-0.5753-0.0596-0.8561-0.1289-0.5375-0.1577-1.0389-0.419-1.4761-0.7692-0.6886-0.5283-1.2632-1.1906-1.6891-1.9469-0.1448-0.2607-0.3838-0.8937-0.8561-2.1612-0.4172-1.1198-0.4765-1.3371-0.7243-1.8832-0.2394-0.5624-0.5335-1.0999-0.8778-1.605-0.41816-0.59-0.90437-1.1287-1.4486-1.605-0.465-0.423-0.49397-0.3825-1.3037-1.0908-0.70691-0.62-0.92274-0.8619-1.1024-1.0908-0.28508-0.3424-0.51258-0.7289-0.67359-1.1444-0.12644-0.3392-0.20021-0.6958-0.21873-1.0574-0.00771-0.3301 0.03031-0.6596 0.11299-0.97925 0.15403-0.7695 0.41284-1.5142 0.76919-2.2134 0.22151-0.4733 0.50982-0.91235 0.85611-1.3037 0.22303-0.24043 0.46526-0.46231 0.72429-0.66344 0.21736-0.16892 0.44632-0.32236 0.68517-0.4592 0.22527-0.13444 0.46065-0.25117 0.70401-0.34911z" fill="url(#a)"/><defs><radialgradient id="b" cx="0" cy="0" r="1" gradienttransform="translate(15 15) scale(28.521)" gradientunits="userSpaceOnUse"><stop stop-color="#746B7F"/><stop stop-color="#615B6F" offset=".12"/><stop stop-color="#514C60" offset=".26"/><stop stop-color="#4B475B" offset=".37"/><stop stop-color="#4F4B5F" offset=".44"/><stop stop-color="#5A566C" offset=".51"/><stop stop-color="#6D6881" offset=".59"/><stop stop-color="#87829E" offset=".67"/><stop stop-color="#A9A2C3" offset=".74"/><stop stop-color="#BCB5D9" offset=".78"/></radialgradient><lineargradient id="a" x1="5.54949" x2="23.9884" y1="7.79624" y2="23.7393" gradientunits="userSpaceOnUse"><stop stop-color="#448491" offset=".05"/><stop stop-color="#4A7986" offset=".15"/><stop stop-color="#506E7B" offset=".33"/><stop stop-color="#526A77" offset=".52"/><stop stop-color="#56707C" offset=".6"/><stop stop-color="#607F8B" offset=".7"/><stop stop-color="#7099A3" offset=".82"/><stop stop-color="#87BDC4" offset=".94"/><stop stop-color="#94D1D6" offset="1"/></lineargradient></defs></svg>
`;

const logo_b64 = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0nVVRGLTgnPz48c3ZnIGZpbGw9J25vbmUnIHZpZXdCb3g9JzAgMCA1MTIgNTEyJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J00yNy44Mzg3IDBIMi4xNjEyN0MwLjk2NzYzNiAwIDAgMC45Njc2MzYgMCAyLjE2MTI3VjI3LjgzODdDMCAyOS4wMzI0IDAuOTY3NjM2IDMwIDIuMTYxMjcgMzBIMjcuODM4N0MyOS4wMzI0IDMwIDMwIDI5LjAzMjQgMzAgMjcuODM4N1YyLjE2MTI3QzMwIDAuOTY3NjM2IDI5LjAzMjQgMCAyNy44Mzg3IDBaJyBmaWxsPScjMjYyODNEJy8+PHBhdGggZD0nbTI3Ljc3OCAxLjAzMTRoLTI1LjU1NGMtMC42NTg0MiAwLTEuMTkyMiAwLjUzMzc1LTEuMTkyMiAxLjE5MjJ2MjUuNTU0YzAgMC42NTg0IDAuNTMzNzUgMS4xOTIyIDEuMTkyMiAxLjE5MjJoMjUuNTU0YzAuNjU4NCAwIDEuMTkyMi0wLjUzMzggMS4xOTIyLTEuMTkyMnYtMjUuNTU0YzAtMC42NTg0My0wLjUzMzgtMS4xOTIyLTEuMTkyMi0xLjE5MjJ6JyBmaWxsPSd1cmwoI2IpJy8+PHBhdGggZD0nbTE3LjQ2NiAyNy4zMzZjLTAuMzY2NSAwLTAuNzExMy0wLjAxNi0xLjA1MzEtMC4wNDY0LTAuNDAyOC0wLjAyNTItMC44MDI0LTAuMDg3Ny0xLjE5MzctMC4xODY5LTAuNzg5MS0wLjIyNjktMS41MjY5LTAuNjA0Mi0yLjE3MjgtMS4xMTEtMC45MDY1LTAuNjk0Ny0xLjY2MzMtMS41NjUzLTIuMjI1LTIuNTU5Ni0wLjIyNi0wLjM5ODQtMC40MzQ2LTAuOTU0Ny0wLjk4Nzk3LTIuNDQyMy0wLjEyMTY4LTAuMzI4OS0wLjIxMjk0LTAuNTc5NS0wLjI4OTcyLTAuNzgwOC0wLjE3OTYyLTAuNDg4Mi0wLjIzOTAxLTAuNjUzMy0wLjM4NTMyLTAuOTcwNi0wLjE5MDg0LTAuNDUzMi0wLjQyNTE1LTAuODg2OS0wLjY5OTY2LTEuMjk1LTAuMzM1NDYtMC40NjY3LTAuNzI0MzktMC44OTI2LTEuMTU4OS0xLjI2OS0wLjE2NjU4LTAuMTQ0OC0wLjI0MzM2LTAuMjEyOS0wLjM4NTMyLTAuMzIzLTAuMTc2NzMtMC4xNDQ4LTAuNDIwMDktMC4zMzMyLTAuODg2NTMtMC43NDE3LTAuNzg4MDItMC42OTI0LTEuMDg1LTEuMDE0LTEuMzU4OC0xLjM2NDUtMC40MTI3OS0wLjUwMzYtMC43NDE1LTEuMDcwNS0wLjk3MzQ0LTEuNjc4OS0wLjIwMjktMC41MzkyLTAuMzIxMTYtMS4xMDY1LTAuMzUwNTYtMS42ODE4LTAuMDE0OTgtMC41MDE3IDAuMDM4MTMtMS4wMDMyIDAuMTU3ODktMS40OTA2IDAuMTkyMDItMC45Mzg4OCAwLjUwOTctMS44NDc2IDAuOTQ0NDgtMi43MDE2IDAuMzAwOTctMC42MzUwNyAwLjY5MTItMS4yMjM4IDEuMTU4OS0xLjc0ODQgMC41NTQwMi0wLjU5NjYyIDEuMTk0Ny0xLjEwNjQgMS45MDA1LTEuNTEyMyAwLjMyMzY4LTAuMTkwNTMgMC42NjI4OS0wLjM1MzM1IDEuMDE0LTAuNDg2NzIgMC41MjE2OS0wLjE4Nzc0IDEuMDcyMy0wLjI4MjM3IDEuNjI2OC0wLjI3OTU4IDAuNDk2MyAwLjAwMTE1IDAuOTkwMyAwLjA2ODM4IDEuNDY4OCAwLjE5OTkxIDAuOTU5NSAwLjIzNTIxIDEuODE2OSAwLjc3NDk2IDIuNDQzOCAxLjUzODQgMC42NjA1IDAuODE3IDAuOTI3MSAxLjg0NCAxLjE0MjkgMy4yMzYxIDAuMDU1IDAuMzYyMTUgMC4wNzY4IDAuNTQ5MDEgMC4wOTU2IDAuNzEyNyAwLjAxMTYgMC4xMTI5OSAwLjAyNDYgMC4yMjU5OCAwLjA1MzYgMC40MjU4OCAwLjE3NTMgMS4xOTM2IDAuMjYyMiAxLjczODMgMC40NjIxIDIuMTU0IDAuMjg5NyAwLjYwODQgMC44NDMxIDAuOTYzMyAxLjIwNjcgMS4xOTggMC44OTIzIDAuNTc5NCAxLjgxMzYgMC42NTc2IDIuNDIzNCAwLjcxMTIgMC4yNDA1IDAuMDIxNyAwLjUxNDMgMC4wMzMzIDAuODEyNyAwLjAzMzMgMC40NDYxIDAgMC44MTctMC4wMjQ2IDAuOTU0Ni0wLjAzNDcgMC4yNzM4LTAuMDIwMyAwLjUwMjYtMC4wNDY0IDAuNzI0My0wLjA3MjUgMC4zMzYyLTAuMDQ1NCAwLjY3NDgtMC4wNzA1IDEuMDE0LTAuMDc1MyAwLjQyNDgtM2UtNCAwLjg0NzggMC4wNTY3IDEuMjU3MyAwLjE2OTUgMC44ODk1IDAuMjA1MSAxLjY5MTggMC42ODUxIDIuMjkzMSAxLjM3MTggMC42MDk5IDAuNzI0MyAwLjc3MzYgMS40Mzg0IDAuOTc5MyAyLjM0NjcgMC4xMzk4IDAuNjA2NiAwLjIyNzUgMS4yMjQgMC4yNjIyIDEuODQ1NSAwLjAzNDcgMC43MDU0IDAuMDgyNSAxLjY2ODctMC4yNDkyIDIuODA0NC0wLjMxOTggMS4wNDQ0LTAuODY5NyAyLjAwMzctMS42MDk0IDIuODA3NC0wLjc3NTggMC44NzAzLTEuNzA5NyAxLjU4NTYtMi43NTIyIDIuMTA3Ni0wLjU5MTYgMC4yOTAxLTEuMjEwMiAwLjUyMTYtMS44NDcgMC42OTEtMC44ODMzIDAuMjQ3Mi0xLjc5MDQgMC40MDAyLTIuNzA1OSAwLjQ1NjMtMC4zODY4IDAuMDI5LTAuNzYwNSAwLjA0MzUtMS4xMTI1IDAuMDQzNXonIGZpbGw9JyMyNjI4M0QnLz48cGF0aCBkPSdtMTcuNDY2IDI2LjIyNmMtMC4zMzMyIDAtMC42NDYxLTAuMDEzMS0wLjk1NDYtMC4wNDA2LTAuMzQyMS0wLjAyMDEtMC42ODE2LTAuMDcyLTEuMDE0LTAuMTU1LTAuNjUwMS0wLjE4OTctMS4yNTc1LTAuNTAzLTEuNzg5LTAuOTIyNy0wLjc4MzktMC42MDM2LTEuNDM4MS0xLjM1ODgtMS45MjM3LTIuMjIwNy0wLjE4MjYtMC4zMjMtMC4zOTY5LTAuODk2Ny0wLjkxNDEtMi4yODQ0LTAuMTIxNy0wLjMyNDUtMC4yMTE1LTAuNTcwOC0wLjI4OTctMC43NzM2LTAuMTc5Ni0wLjQ5MS0wLjI1MzUtMC42OTUzLTAuNDE4Ni0xLjA1MzEtMC4yMTgyMS0wLjUxMjUtMC40ODUtMS4wMDI5LTAuNzk2NzYtMS40NjQ1LTAuMzgyODYtMC41MzI3LTAuODI2NzMtMS4wMTg5LTEuMzIyNi0xLjQ0ODYtMC4xOTU1NS0wLjE3ODEtMC4yOTk4NS0wLjI2MDctMC40NDQ3MS0wLjM3NTEtMC4xNzgxNy0wLjE0NDktMC4zOTgzNi0wLjMxNDQtMC44NDMwNy0wLjcwNC0wLjcyNDI5LTAuNjM0NS0wLjk4NTAzLTAuOTE3LTEuMjE2OC0xLjIxMzktMC4zNDIyMi0wLjQxNTEtMC42MTUxNy0wLjg4MjgtMC44MDgzMS0xLjM4NDktMC4zMTgyNi0wLjgxMTgtMC4zNjkwMS0xLjcwNC0wLjE0NDg2LTIuNTQ2NiAwLjE3MDg0LTAuODQ1ODcgMC40NTU5Mi0xLjY2NDYgMC44NDc0Mi0yLjQzMzYgMC4yNTY4OC0wLjU0NzExIDAuNTkxMDUtMS4wNTQ1IDAuOTkyMjctMS41MDY1IDAuNDc0OTgtMC41MTQyIDEuMDI0OS0wLjk1MzcyIDEuNjMxMS0xLjMwMzcgMC4yNjk4MS0wLjE1ODczIDAuNTUyMjctMC4yOTQ4OCAwLjg0NDUyLTAuNDA3MDUgMC4zOTk0My0wLjE0Mzk5IDAuODIxMi0wLjIxNjA4IDEuMjQ1OC0wLjIxMjk0IDAuMzk5IDAuMDAyMjggMC43OTU5IDAuMDU2ODMgMS4xODA2IDAuMTYyMjQgMC43MzMzIDAuMTcxNDggMS4zOTAyIDAuNTc4NTQgMS44NzAxIDEuMTU4OSAwLjQzNDYgMC41NDYxMSAwLjY4ODEgMS4yODA1IDAuOTA5NyAyLjcwODggMC4wNTIyIDAuMzM4OTcgMC4wNzEgMC41MDU1NiAwLjA4ODQgMC42NjYzNSAwLjAxMyAwLjEyMzEzIDAuMDI3NSAwLjI0NjI2IDAuMDU5NCAwLjQ2MzU0IDAuMTc5NiAxLjIxODMgMC4yNzgxIDEuODkwNCAwLjU2MDYgMi40NzU2IDAuNDM0NiAwLjg4OCAxLjE1ODggMS4zNjMxIDEuNjAzNiAxLjY0NTYgMS4xMjEyIDAuNzI0MyAyLjI1MSAwLjgyNTcgMi45MjYxIDAuODg2NSAwLjI3MjMgMC4wMjQ3IDAuNTc5NCAwLjAzNjMgMC45MTExIDAuMDM2MyAwLjQ4MzkgMCAwLjg4NjYtMC4wMjYxIDEuMDM4Ny0wLjAzNzcgMC4yODk3LTAuMDIxNyAwLjU0NDYtMC4wNTA3IDAuNzY2My0wLjA3NjggMC4yOTI1LTAuMDM5NyAwLjU4Ny0wLjA2MjQgMC44ODIxLTAuMDY4MSAwLjMyNjYtNGUtNCAwLjY1MTcgMC4wNDM5IDAuOTY2MiAwLjEzMTkgMC4zNzA5IDAuMDk5OSAxLjE0MTUgMC4zMDk5IDEuNzM4MyAxLjAxNCAwLjQzNDYgMC41MTcxIDAuNTU5MiAxLjA1ODkgMC43NDYgMS44ODMxIDAuMTI1NiAwLjU0MzcgMC4yMDQ2IDEuMDk3MSAwLjIzNjIgMS42NTQzIDAuMDMxOCAwLjY2MDUgMC4wNzI0IDEuNDgxOS0wLjIwNzIgMi40Mzc5LTAuMjc1MSAwLjg5MTQtMC43NDc0IDEuNzA5My0xLjM4MTkgMi4zOTMxLTAuNjgxOSAwLjc2MTQtMS41MDIzIDEuMzg2My0yLjQxNzcgMS44NDExLTAuNTI5NiAwLjI2MDEtMS4wODM3IDAuNDY2OC0xLjY1NDMgMC42MTcxLTAuODEyNiAwLjIyNi0xLjY0NjcgMC4zNjU4LTIuNDg4NiAwLjQxNzItMC4zNDYyIDAuMDMzMy0wLjY4NjYgMC4wNDA2LTEuMDE0IDAuMDQwNnonIGZpbGw9JyNBNTk2NzgnLz48cGF0aCBkPSdtOS4yMTE1IDQuODM1NGMwLjgyMTMxLTAuMzAxMyAxLjYzOTgtMC4wOTEyNiAxLjg4MzEtMC4wMjc1MiAwLjU1MDcgMC4xMjY3MSAxLjA0MzggMC40MzIzNiAxLjQwMjMgMC44NjkxNCAwLjMyMyAwLjM5ODM2IDAuNTI0MyAxLjAxNCAwLjcyNDIgMi4yNzg2IDAuMDkxMyAwLjU4ODEyIDAuMDczOSAwLjYxNDIgMC4xNDQ5IDEuMTIyNiAwLjE4NjkgMS4yNjkgMC4yOTg0IDIuMDI4IDAuNjQxNyAyLjczNzggMC41NDAzIDEuMTE1NCAxLjQ0ODYgMS43MDUgMS45MjUyIDIuMDEwNyAxLjMwMzcgMC44NDU5IDIuNjA3NCAwLjk2MTggMy4zMzE3IDEuMDI3IDAuNjk3OCAwLjA1MTYgMS4zOTg0IDAuMDUxNiAyLjA5NjEgMCAxLjExMTEtMC4wODI2IDEuNTUxNC0wLjI0OTIgMi4zMTA1LTAuMDQyIDAuMzM0NiAwLjA4OTggMC44Nzc4IDAuMjQ2MiAxLjI4MzQgMC43MjQzIDAuMjg5NyAwLjM0OTEgMC4zODI0IDAuNzI0MyAwLjU1NjMgMS40OTY0IDAuMTE0MSAwLjQ5MjIgMC4xODU4IDAuOTkzMyAwLjIxNDQgMS40OTc4IDAuMDMxOCAwLjYzODggMC4wNjUxIDEuMzI5OC0wLjE3MSAyLjEzOTUtMC4yMzg2IDAuNzY2Ni0wLjY0ODMgMS40NjktMS4xOTggMi4wNTQxLTAuNjAzMiAwLjY3MzEtMS4zMjkzIDEuMjI0Ny0yLjEzOTUgMS42MjUzLTAuNDgwOCAwLjIzNDMtMC45ODQxIDAuNDE5Mi0xLjUwMjIgMC41NTE5LTAuNzU0NCAwLjIwOTYtMS41Mjg5IDAuMzM4Ny0yLjMxMDQgMC4zODUzLTAuNjA1IDAuMDUxLTEuMjEzMSAwLjA1MS0xLjgxOCAwLTAuMjg4Ny0wLjAxNjUtMC41NzUzLTAuMDU5Ni0wLjg1NjEtMC4xMjg5LTAuNTM3NS0wLjE1NzctMS4wMzg5LTAuNDE5LTEuNDc2MS0wLjc2OTItMC42ODg2LTAuNTI4My0xLjI2MzItMS4xOTA2LTEuNjg5MS0xLjk0NjktMC4xNDQ4LTAuMjYwNy0wLjM4MzgtMC44OTM3LTAuODU2MS0yLjE2MTItMC40MTcyLTEuMTE5OC0wLjQ3NjUtMS4zMzcxLTAuNzI0My0xLjg4MzItMC4yMzk0LTAuNTYyNC0wLjUzMzUtMS4wOTk5LTAuODc3OC0xLjYwNS0wLjQxODE2LTAuNTktMC45MDQzNy0xLjEyODctMS40NDg2LTEuNjA1LTAuNDY1LTAuNDIzLTAuNDkzOTctMC4zODI1LTEuMzAzNy0xLjA5MDgtMC43MDY5MS0wLjYyLTAuOTIyNzQtMC44NjE5LTEuMTAyNC0xLjA5MDgtMC4yODUwOC0wLjM0MjQtMC41MTI1OC0wLjcyODktMC42NzM1OS0xLjE0NDQtMC4xMjY0NC0wLjMzOTItMC4yMDAyMS0wLjY5NTgtMC4yMTg3My0xLjA1NzQtMC4wMDc3MS0wLjMzMDEgMC4wMzAzMS0wLjY1OTYgMC4xMTI5OS0wLjk3OTI1IDAuMTU0MDMtMC43Njk1IDAuNDEyODQtMS41MTQyIDAuNzY5MTktMi4yMTM0IDAuMjIxNTEtMC40NzMzIDAuNTA5ODItMC45MTIzNSAwLjg1NjExLTEuMzAzNyAwLjIyMzAzLTAuMjQwNDMgMC40NjUyNi0wLjQ2MjMxIDAuNzI0MjktMC42NjM0NCAwLjIxNzM2LTAuMTY4OTIgMC40NDYzMi0wLjMyMjM2IDAuNjg1MTctMC40NTkyIDAuMjI1MjctMC4xMzQ0NCAwLjQ2MDY1LTAuMjUxMTcgMC43MDQwMS0wLjM0OTExeicgZmlsbD0ndXJsKCNhKScvPjxkZWZzPjxyYWRpYWxncmFkaWVudCBpZD0nYicgY3g9JzAnIGN5PScwJyByPScxJyBncmFkaWVudHRyYW5zZm9ybT0ndHJhbnNsYXRlKDE1IDE1KSBzY2FsZSgyOC41MjEpJyBncmFkaWVudHVuaXRzPSd1c2VyU3BhY2VPblVzZSc+PHN0b3Agc3RvcC1jb2xvcj0nIzc0NkI3RicvPjxzdG9wIHN0b3AtY29sb3I9JyM2MTVCNkYnIG9mZnNldD0nLjEyJy8+PHN0b3Agc3RvcC1jb2xvcj0nIzUxNEM2MCcgb2Zmc2V0PScuMjYnLz48c3RvcCBzdG9wLWNvbG9yPScjNEI0NzVCJyBvZmZzZXQ9Jy4zNycvPjxzdG9wIHN0b3AtY29sb3I9JyM0RjRCNUYnIG9mZnNldD0nLjQ0Jy8+PHN0b3Agc3RvcC1jb2xvcj0nIzVBNTY2Qycgb2Zmc2V0PScuNTEnLz48c3RvcCBzdG9wLWNvbG9yPScjNkQ2ODgxJyBvZmZzZXQ9Jy41OScvPjxzdG9wIHN0b3AtY29sb3I9JyM4NzgyOUUnIG9mZnNldD0nLjY3Jy8+PHN0b3Agc3RvcC1jb2xvcj0nI0E5QTJDMycgb2Zmc2V0PScuNzQnLz48c3RvcCBzdG9wLWNvbG9yPScjQkNCNUQ5JyBvZmZzZXQ9Jy43OCcvPjwvcmFkaWFsZ3JhZGllbnQ+PGxpbmVhcmdyYWRpZW50IGlkPSdhJyB4MT0nNS41NDk0OScgeDI9JzIzLjk4ODQnIHkxPSc3Ljc5NjI0JyB5Mj0nMjMuNzM5MycgZ3JhZGllbnR1bml0cz0ndXNlclNwYWNlT25Vc2UnPjxzdG9wIHN0b3AtY29sb3I9JyM0NDg0OTEnIG9mZnNldD0nLjA1Jy8+PHN0b3Agc3RvcC1jb2xvcj0nIzRBNzk4Nicgb2Zmc2V0PScuMTUnLz48c3RvcCBzdG9wLWNvbG9yPScjNTA2RTdCJyBvZmZzZXQ9Jy4zMycvPjxzdG9wIHN0b3AtY29sb3I9JyM1MjZBNzcnIG9mZnNldD0nLjUyJy8+PHN0b3Agc3RvcC1jb2xvcj0nIzU2NzA3Qycgb2Zmc2V0PScuNicvPjxzdG9wIHN0b3AtY29sb3I9JyM2MDdGOEInIG9mZnNldD0nLjcnLz48c3RvcCBzdG9wLWNvbG9yPScjNzA5OUEzJyBvZmZzZXQ9Jy44MicvPjxzdG9wIHN0b3AtY29sb3I9JyM4N0JEQzQnIG9mZnNldD0nLjk0Jy8+PHN0b3Agc3RvcC1jb2xvcj0nIzk0RDFENicgb2Zmc2V0PScxJy8+PC9saW5lYXJncmFkaWVudD48L2RlZnM+PC9zdmc+Cg==";

export default async function handler(req, res) {
  const { slug } = req.query;
  const normalizedSlug = normalizeName(slug);
  const jsonDirectory = path.join(process.cwd(), 'public');
  const fileContents = await fs.readFile(jsonDirectory + '/index.json', 'utf8');
  const plugins = JSON.parse(fileContents)
  if (plugins[normalizedSlug]) {
    const shield_schema = {
        "color": "#0074B8",
        "label": "napari hub",
        "logoSvg": logo_b64,
        "message": slug,
        "schemaVersion": 1,
        "style": "flat-square"
    }
    return res.status(200).json(shield_schema);
  }
  else {
    return res.status(404).json('Plugin not found.')
  }
}

function normalizeName(name) {
  return name.replace(/[-_.]+/g, "-").toLowerCase();
}
